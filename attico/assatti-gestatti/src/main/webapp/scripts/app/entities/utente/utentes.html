<div>

	<h2 translate="cifra2gestattiApp.utente.home.title">Utente</h2>

	<div class="container">
		<div class="row">
			<div class="col-md-4">
				<a ng-show="!configurationParams.user_manage_enabled" ui-sref="register" class="btn btn-primary"> <span
					class="glyphicon glyphicon-flash"></span> <span
					translate="cifra2gestattiApp.utente.home.createLabel">Create
						a new Utente</span>
				</a>
				<a ng-show="configurationParams.user_manage_enableds" ui-sref="import" class="btn btn-primary"> <span
					class="glyphicon glyphicon-flash"></span> <span
					translate="cifra2gestattiApp.utente.home.importLabel">Import
						a new Utente</span>
				</a>
				<!--
                <button class="btn btn-primary" data-toggle="modal" data-target="#saveUtenteModal" ng-click="clear()">
                    <span class="glyphicon glyphicon-flash"></span> <span translate="cifra2gestattiApp.utente.home.createLabel">Create a new Utente</span>
                </button>
            -->
			</div>
		</div>
	</div>
	<div class="modal fade" id="saveUtenteModal" tabindex="-1"
		role="dialog" aria-labelledby="myUtenteLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<form name="editForm" role="form" novalidate ng-submit="save()"
					show-validation>

					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true" ng-click="clear()">&times;</button>
						<h4 class="modal-title" id="myUtenteLabel"
							translate="cifra2gestattiApp.utente.home.createOrEditLabel">Create
							or edit a Utente</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label>ID</label> <input type="text" class="form-control"
								name="id" ng-model="utente.id" readonly>
						</div>

						<utente-form ng-model="utente" ng-disabled="false"></utente-form>


						<div class="list-group col-sm-12" ng-if="utente.id > 0">
							<h3>Ruoli sistema</h3>
							<a ng-repeat="ruolo in utente.user.roles" class="list-group-item"
								title="{{ruolo}}"><i class="fa fa-cube"></i> {{ruolo}} </a>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal"
							ng-click="clear()">
							<span class="glyphicon glyphicon-ban-circle"></span>&nbsp;<span
								translate="entity.action.cancel">Cancel</span>
						</button>
						<button type="submit" ng-disabled="editForm.$invalid || (utente.user.password && (utente.user.password.length < 5 || utente.user.password.length > 50))"
							class="btn btn-primary">
							<span class="glyphicon glyphicon-save"></span>&nbsp;<span
								translate="entity.action.save">Save</span>
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>

	<div class="modal fade" id="deleteUtenteConfirmation">
		<div class="modal-dialog">
			<div class="modal-content">
				<form name="deleteForm" ng-submit="confirmDelete(utente.id)">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true" ng-click="clear()">&times;</button>
						<h4 class="modal-title" translate="entity.delete.title">Confirm
							delete operation</h4>
					</div>
					<div class="modal-body">
						<p translate="cifra2gestattiApp.utente.delete.question"
							translate-values="{username: '{{utente.username}}'}">Are you
							sure you want to delete this Utente?</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal"
							ng-click="clear()">
							<span class="glyphicon glyphicon-ban-circle"></span>&nbsp;<span
								translate="entity.action.cancel">Cancel</span>
						</button>
						<button type="submit" ng-disabled="deleteForm.$invalid"
							class="btn btn-danger">
							<span class="glyphicon glyphicon-remove-circle"></span>&nbsp;<span
								translate="entity.action.disable">Delete</span>
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>


	<div class="modal fade" id="attivaUtenteConfirmation">
		<div class="modal-dialog">
			<div class="modal-content">
				<form name="deleteForm" ng-submit="confirmAttiva(utente.id)">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true" ng-click="clear()">&times;</button>
						<h4 class="modal-title" translate="entity.attiva.title">Confirm
							attiva operation</h4>
					</div>
					<div class="modal-body">
						<p translate="cifra2gestattiApp.utente.attiva.question"
							translate-values="{username: '{{utente.username}}'}">Are you
							sure you want to delete this Utente?</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal"
							ng-click="clear()">
							<span class="glyphicon glyphicon-ban-circle"></span>&nbsp;<span
								translate="entity.action.cancel">Cancel</span>
						</button>
						<button type="submit" ng-disabled="deleteForm.$invalid"
							class="btn btn-warning">
							<span class="fa fa-send"></span>&nbsp;<span
								translate="entity.action.attiva">attiva</span>
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>



	<div class="modal fade" id="activeAmministratoreIPConfirmation">
		<div class="modal-dialog">
			<div class="modal-content">
				<form name="deleteForm"
					ng-submit="confirmActiveAmministratoreIP(utente.id)">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true" ng-click="clear()">&times;</button>
						<h4 class="modal-title" translate="entity.attiva.title">Confirm
							attiva operation</h4>
					</div>
					<div class="modal-body">
						<p
							translate="cifra2gestattiApp.utente.activeAmministratoreIP.question"
							translate-values="{username: '{{utente.username}}'}">?</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal"
							ng-click="clear()">
							<span class="glyphicon glyphicon-ban-circle"></span>&nbsp;<span
								translate="entity.action.cancel">Cancel</span>
						</button>
						<button type="submit" ng-disabled="deleteForm.$invalid"
							class="btn btn-warning">
							<span class="fa fa-send"></span>&nbsp;<span
								translate="cifra2gestattiApp.utente.activeAmministratoreIP.button">attiva</span>
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>

<div class="modal fade" id="activeAmministratoreRPConfirmation">
		<div class="modal-dialog">
			<div class="modal-content">
				<form name="deleteForm"
					ng-submit="confirmActiveAmministratoreRP(utente.id)">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true" ng-click="clear()">&times;</button>
						<h4 class="modal-title" translate="entity.attiva.title">Confirm
							attiva operation</h4>
					</div>
					<div class="modal-body">
						<p
							translate="cifra2gestattiApp.utente.activeAmministratoreRP.question"
							translate-values="{username: '{{utente.username}}'}">?</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal"
							ng-click="clear()">
							<span class="glyphicon glyphicon-ban-circle"></span>&nbsp;<span
								translate="entity.action.cancel">Cancel</span>
						</button>
						<button type="submit" ng-disabled="deleteForm.$invalid"
							class="btn btn-warning">
							<span class="fa fa-send"></span>&nbsp;<span
								translate="cifra2gestattiApp.utente.activeAmministratoreRP.button">attiva</span>
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>


	<div>
		<div class="table-responsive crud-search">
	
			<table class="table table-striped">
				<thead>
					<tr>
						<th>ID</th>
						<th translate="cifra2gestattiApp.utente.cognome">Cognome</th>
						<th translate="cifra2gestattiApp.utente.nome">Nome</th>
						<th translate="cifra2gestattiApp.utente.username">Username</th>
						<th translate="cifra2gestattiApp.utente.stato">Stato</th>
						<th> 
			                <span translate="cifra2gestattiApp.utente.aoo">Aoo</span>
		                	<span data-toggle="tooltip"
								title="<b>GUIDA</b><br/>Inserire il codice AOO oppure la denominazione dellâ€™AOO."
								data-html="true" ng-init="initTooltip()">
								<i class="fa fa-question" ></i>
							</span>
		                </th>
						<th></th>
						<th width="30%"></th>
					</tr>
					<tr>
						<th><input style="max-width: 25px;" type="text"
							ng-model="tempSearch.id"></th>
						<th><input type="text" ng-model="tempSearch.cognome"></th>
						<th><input type="text" ng-model="tempSearch.nome"></th>
						<th><input type="text" ng-model="tempSearch.username"></th>
						<th class="fixed-width"><ui-select ng-model="tempSearch.stato" theme="bootstrap">
							<ui-select-match allow-clear="true">{{$select.selected}}</ui-select-match>
							<ui-select-choices
								repeat="stato in statos | filter: $select.search">
							<div ng-bind-html="stato | highlight: $select.search"></div>
							</ui-select-choices> </ui-select></th>
						<th><input type="text" ng-model="tempSearch.aoo"></th>
						<th></th>
						<th width="30%"></th>
					</tr>
					<tr>
						<td colspan="9" class="text-center"><button
								class="btn btn-primary btn-sm" ng-click="ricerca()">
								<span class="glyphicon glyphicon-search"></span> <span
									translate="global.messages.cerca" class="ng-scope">Cerca</span>
							</button>
							<button class="btn btn-primary btn-sm" ng-click="resetRicerca()">
								<span translate="global.messages.resetricerca" class="ng-scope">Reset
									ricerca</span>
							</button></td>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="utente in utentes">
						<td><a ui-sref="utenteDetail({id:utente.id})">{{utente.id}}</a></td>
						<td>{{utente.cognome}}</td>
						<td>{{utente.nome}}</td>
						<td><a href=""><span ng-click="ricercaProfilo(utente.username)">{{utente.username}}</span></a>
						</td>
						<td>{{utente.stato}}</td>
						<td>
							<div ng-repeat="aoo in utente.aoos">
								<span>{{aoo}}</span>
							</div>
						</td>
						<td align="center">
	
							<div class="dropdown">
	
								<button type="submit"
									class="btn btn-default btn-sm dropdown-toggle" type="button"
									id="dropdownMenuAttiva" data-toggle="dropdown"
									aria-expanded="true">
									Funzioni Attiva <span class="caret"></span>
								</button>
	
								<ul class="dropdown-menu" role="menu"
									aria-labelledby="dropdownMenu{{aoo.id}}">
									<li role="presentation"><a type="submit" role="menuitem"
										tabindex="-1" href ng-click="attiva(utente.id)"> <span
											class="fa fa-send"></span>&nbsp;<span
											translate="entity.action.attiva"> attiva</span>
									</a></li>
	
	
	
									<li role="presentation" has-role="ROLE_ADMIN"><a
										type="submit" ng-click="activeAmministratoreIP(utente.id)">
											<span class="fa fa-send"></span>&nbsp;<span
											translate="cifra2gestattiApp.utente.activeAmministratoreIP.button">
												Attiva amministratore I</span>
									</a></li>
									
									<li role="presentation" has-role="ROLE_ADMIN"><a
										type="submit" ng-click="activeAmministratoreRP(utente.id)">
											<span class="fa fa-send"></span>&nbsp;<span
											translate="cifra2gestattiApp.utente.activeAmministratoreRP.button">
												Attiva amministratore II</span>
									</a></li>
								</ul>
							</div>
	
						</td>
	
	
	
						<td align="center">
							<button type="submit" ui-sref="utenteDetail({id:utente.id})"
								class="btn btn-info btn-sm">
								<span class="glyphicon glyphicon-eye-open"></span>&nbsp;<span
									translate="entity.action.view"> View</span>
							</button>
	
							<button type="submit"
								ng-click="showUpdate(utente.id)" class="btn btn-primary btn-sm">
								<span class="glyphicon glyphicon-pencil"></span>&nbsp;<span
									translate="entity.action.edit"> Edit</span>
							</button>
	
							<span has-ruolo="ROLE_ADMIN">
								<button ng-show="utente.stato != 'DISABILITATO'" type="submit"
									ng-click="disable(utente)" class="btn btn-warning btn-sm">
									<span class="glyphicon glyphicon-remove-circle"></span>&nbsp;<span
										translate="entity.action.disable"> Disable</span>
								</button>
							</span>
	
							<button ng-show="utente.stato == 'DISABILITATO'" type="submit"
								ng-click="enable(utente)" class="btn btn-success btn-sm">
								<span class="glyphicon glyphicon-ok-circle"></span>&nbsp;<span
									translate="entity.action.enable"> Enable</span>
							</button>
						</td>
	
	
	
					</tr>
				</tbody>
			</table>
			<div ng-if="utentes && utentes.length == 0" class="search-no-result"><h3 translate="global.searchNoResult"></h3></div>
		</div>
		<nav>
			<ul class="pagination">
				<li ng-show="links['first']" ng-click="loadPage(links['first'])"><a>&lt;&lt;</a></li>
				<li ng-show="links['prev']" ng-click="loadPage(links['prev'])"><a>&lt;</a></li>
				<li ng-show="page > 2" ng-click="loadPage(page - 2)"><a>{{page
						- 2}}</a></li>
				<li ng-show="page > 1" ng-click="loadPage(page - 1)"><a>{{page
						- 1}}</a></li>
				<li class="active"><a>{{page}}</a></li>
				<li ng-show="page < links['last']" ng-click="loadPage(page + 1)"><a>{{page
						+ 1}}</a></li>
				<li ng-show="page < links['last'] - 1" ng-click="loadPage(page + 2)"><a>{{page
						+ 2}}</a></li>
				<li ng-show="links['next']" ng-click="loadPage(links['next'])"><a>&gt;</a></li>
				<li ng-show="links['last']" ng-click="loadPage(links['last'])"><a>&gt;&gt;</a></li>
			</ul>
		</nav>
	</div>
</div>
